var commonjsGlobal="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window;function createCommonjsModule(a,b){return b={exports:{}},a(b,b.exports),b.exports}var polyfill=createCommonjsModule(function(){commonjsGlobal.requestAnimationFrame=commonjsGlobal.requestAnimationFrame||setImmediate,commonjsGlobal.cancelAnimationFrame=commonjsGlobal.cancelAnimationFrame||clearImmediate});function tween(a){var b=a.from,c=a.to,d=a.duration,e=void 0===d?1:d,f=a.ease,g=void 0===f?function(a){return a}:f,h=a.yoyo,i=void 0===h?0:h,j=a.loop,k=void 0===j?0:j;return{start:function(a){function d(){if(q+=1/60/e*r,1<q?q=1:0>q?q=0:null,o)for(var a in m)n[a]=b[a]+m[a]*g(q);else n=b+m*g(q);h(n),1===r&&1==q||-1===r&&0==q?k>p.loop?(p.loop++,q=0,l=requestAnimationFrame(d)):i>p.yoyo?(p.yoyo++,r*=-1,l=requestAnimationFrame(d)):(v=!0,j&&j()):l=requestAnimationFrame(d)}var f,h,j,l,m,n,o=isNaN(b),p={yoyo:0,loop:0},q=0,r=1,s=!1,u=!1,v=!1;return o?(m={},n={},Object.keys(b).forEach(function(a){m[a]=c[a]-b[a]})):m=c-b,a instanceof Function?h=a:(f=a,h=f.update,j=f.complete,f),d(),{stop(){s=!0,cancelAnimationFrame(l)},pause(){return s||v?this:(u=!0,cancelAnimationFrame(l),this)},resume(){return u&&(u=!1,d()),this}}}}}function chain(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return{start:function(a){function c(){g=b.shift().start({update:e,complete(){b.length?c():(i=!0,f&&f())}})}var d,e,f,g,h=!1,i=!1,j=!1;return a instanceof Function?e=a:(d=a,e=d.update,f=d.complete,d),c(),{stop(){h=!0,g&&g.stop()},pause(){if(!(h||i))return j=!0,g.pause(),this},resume(){return j&&g&&(j=!1,g.resume()),this}}}}}function composite(a){var b=Object.keys(a);return{start:function(c){var d,e,f,g={},h={start:0,end:0},i=!1,j=!1;c instanceof Function?e=c:(d=c,e=d.update,f=d.complete,d);var k=b.map(function(c){return h.start++,a[c].start({update:function(a){g[c]=a,h.start===b.length&&e(g)},complete:function(){h.end++,h.end===b.length&&f&&f()}})});return{stop(){i=!0,k.forEach(function(a){return a.stop()})},pause(){if(!(i||!1))return j=!0,k.forEach(function(a){return a.pause()}),this},resume(){return j?(j=!1,void k.forEach(function(a){return a.resume()})):this}}}}}function linear(a){return a}function easeOut(a){return a*(2-a)}function easeIn(a){return Math.pow(a,2)}function easeInOut(a){var b=Math.pow;return(a*=2,1>a)?.5*b(a,2):(a--,.5*(1-a*(a-2)))}var easing=Object.freeze({linear:linear,easeOut:easeOut,easeIn:easeIn,easeInOut:easeInOut});function bezier(a){var b=a.points,c=void 0===b?[]:b,d=a.duration,e=void 0===d?1:d,f=a.ease,g=void 0===f?function(a){return a}:f,h=a.loop,i=void 0===h?0:h,j=a.yoyo,k=void 0===j?0:j,l={yoyo:0,loop:0};return{start:function(a){function b(){m+=1/60/e*n,1<m?m=1:0>m?m=0:null,h(bezier$1(c,g(m))),1===n&&1==m||-1===n&&0==m?i>l.loop?(l.loop++,m=0,f=requestAnimationFrame(b)):k>l.yoyo?(l.yoyo++,n*=-1,f=requestAnimationFrame(b)):(q=!0,j&&j()):f=requestAnimationFrame(b)}var d,f,h,j,m=0,n=1,o=!1,p=!1,q=!1;return a instanceof Function?h=a:(d=a,h=d.update,j=d.complete,d),b(),{stop(){o=!0,cancelAnimationFrame(f)},pause(){if(!(o||q))return p=!0,cancelAnimationFrame(f),this},resume(){return p&&(p=!1,b()),this}}}}}function bezier$1(a,b){return{x:calc(a[0].x,a[1].x,a[2].x,b),y:calc(a[0].y,a[1].y,a[2].y,b)}}function calc(a,b,c,d){var e=Math.pow;return e(1-d,2)*a+2*(1-d)*d*b+e(d,2)*c}function bezier_cubic(a){var b=a.points,c=void 0===b?[]:b,d=a.duration,e=void 0===d?1:d,f=a.ease,g=void 0===f?function(a){return a}:f,h=a.yoyo,i=void 0===h?0:h,j=a.loop,k=void 0===j?0:j,l={yoyo:0,loop:0};return{start:function(a){function b(){m+=1/60/e*n,1<m?m=1:0>m?m=0:0,h(bezier$2(c,g(m))),1===n&&1==m||-1===n&&0==m?k>l.loop?(l.loop++,m=0,f=requestAnimationFrame(b)):i>l.yoyo?(l.yoyo++,n*=-1,f=requestAnimationFrame(b)):(q=!0,j&&j()):f=requestAnimationFrame(b)}var d,f,h,j,m=0,n=1,o=!1,p=!1,q=!1;return a instanceof Function?h=a:(d=a,h=d.update,j=d.complete,d),b(),{stop(){o=!0,cancelAnimationFrame(f)},pause(){if(!(o||q))return p=!0,cancelAnimationFrame(f),this},resume(){return p&&(p=!1,b()),this}}}}}function bezier$2(a,b){return{x:calc$1(a[0].x,a[1].x,a[2].x,a[3].x,b),y:calc$1(a[0].y,a[1].y,a[2].y,a[3].y,b)}}function calc$1(a,b,c,d,e){var f=Math.pow;return f(1-e,3)*a+3*f(1-e,2)*e*b+3*(1-e)*f(e,2)*c+f(e,3)*d}function catmullRom(a){var b=a.points,c=a.speed,d=void 0===c?10:c,e=a.loop;if(void 0!==e&&e){var f=b[0],g=b[b.length-1];f.x===g.x&&f.y===g.y||b.push(f)}return b.unshift(b[0]),b.push(b[b.length-1]),{start:function(a){function c(){if(i+=r,1<i?i=1:null,g(catmullRom$1(n,o,p,q,i)),1===i){var a=l.next(),b=a.value,d=a.done;d?h&&h():(n=b.p1,o=b.p2,p=b.p3,q=b.p4,r=b.dt,i=0,f=requestAnimationFrame(c))}else f=requestAnimationFrame(c)}var e,f,g,h,i=0,j=!1,k=!1;a instanceof Function?g=a:(e=a,g=e.update,h=e.complete,e);var l=function(){var a=0;return{next(){var c={p1:b[a],p2:b[a+1],p3:b[a+2],p4:b[a+3],dt:d/distance(b[a+1],b[a+2])},e=a+3>=b.length;return a++,{value:c,done:e}}}}(),m=l.next().value,n=m.p1,o=m.p2,p=m.p3,q=m.p4,r=m.dt;return c(),{stop(){j=!0,cancelAnimationFrame(f)},pause(){if(!(j||!1))return k=!0,cancelAnimationFrame(f),this},resume(){return k&&(k=!1,c()),this}}}}}function distance(a,b){var c=Math.pow;return Math.sqrt(c(a.x-b.x,2)+c(a.y-b.y,2))}function catmullRom$1(a,b,c,d,e){return{x:calc$2(a.x,b.x,c.x,d.x,e),y:calc$2(a.y,b.y,c.y,d.y,e)}}function calc$2(a,b,c,d,e){return .5*(((-a+3*b-3*c+d)*e+(2*a-5*b+4*c-d))*e+c-a)*e+b}var index=Object.freeze({bezier:bezier,cubicBezier:bezier_cubic,catmullRom:catmullRom});export{tween,chain,composite,easing,index as curve};
